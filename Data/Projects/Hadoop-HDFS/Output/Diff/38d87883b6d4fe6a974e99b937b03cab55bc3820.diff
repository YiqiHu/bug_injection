diff --git a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/converter/FSQueueConverter.java b/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/converter/FSQueueConverter.java
index 8fd10f5e7a0a..adc6bfda44fb 100644
--- a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/converter/FSQueueConverter.java
+++ b/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/main/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/converter/FSQueueConverter.java
@@ -359,7 +359,7 @@ private Map<String, BigDecimal> getCapacities(int totalWeight,
       // fix last value if total != 100.000
       if (!totalPct.equals(hundred)) {
         BigDecimal tmp = new BigDecimal(0);
-        for (int i = 0; i < children.size() - 2; i++) {
+        for (int i = 0; i < children.size() - 1; i++) {
           tmp = tmp.add(capacities.get(children.get(i).getQueueName()));
         }
 
diff --git a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/converter/TestFSQueueConverter.java b/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/converter/TestFSQueueConverter.java
index 580fbaa9416f..c35bf8e1af41 100644
--- a/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/converter/TestFSQueueConverter.java
+++ b/hadoop-yarn-project/hadoop-yarn/hadoop-yarn-server/hadoop-yarn-server-resourcemanager/src/test/java/org/apache/hadoop/yarn/server/resourcemanager/scheduler/fair/converter/TestFSQueueConverter.java
@@ -296,7 +296,7 @@ public void testChildCapacity() {
         csConfig.get(PREFIX + "root.default.capacity"));
     assertEquals("root.admins capacity", "33.333",
         csConfig.get(PREFIX + "root.admins.capacity"));
-    assertEquals("root.users capacity", "66.667",
+    assertEquals("root.users capacity", "33.334",
         csConfig.get(PREFIX + "root.users.capacity"));
 
     // root.users
